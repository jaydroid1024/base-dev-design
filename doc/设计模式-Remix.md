[参考专栏 | 设计模式之美](https://time.geekbang.org/column/intro/250?code=Grxvvkczx9tydhzn0RhJfNfwaF2RgJA9qeUWd8orIYo%3D)

[参考课程 | java设计模式精讲 Debug 方式+内存分析](https://coding.imooc.com/class/270.html?mc_marking=6eab7b8c9bc28db4f23571353f1a9fe5&mc_channel=banner)

[参考书籍 | 深入设计模式](https://refactoringguru.cn/design-patterns)

[参考规范 | Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)

[参考规范 | 阿里巴巴 Android 开发手册](https://developer.aliyun.com/article/499254?spm=a2c6h.14164896.0.0.5aff1569ODFSxd)

[参考规范 | 阿里巴巴 Java 开发手册](https://developer.aliyun.com/article/69327)


# 设计模式之百问百答

Talk is cheap，Show me the code！！！

## 第一章 前言

### 001 何为烂代码？

命名不规范、类设计不合理、分层不清晰、没有模块化概念、代码结构混乱、高度耦合等等。这样的代码维护起来非常费劲，添加或者修改一个功能，常常会牵一发而动全身，让你无从下手，恨不得将全部的代码删掉重写！

### 002 为什么要学习设计模式相关的知识？

- 应对面试中的设计模式相关问题；
- 告别写被人吐槽的烂代码；
- 提高复杂代码的设计和开发能力；
- 让读源码、学框架事半功倍；
- 为你的职场发展做铺垫。

### 003 描述代码质量高的常用词汇有哪些？

| --                                           | --                              | --                            |
| -------------------------------------------- | ------------------------------- | ----------------------------- |
| 灵活性（flexibility）                        | 可维护性（maintainability）     | 可读性（readability）         |
| 可扩展性（extensibility）                    | 易修改性（changeability）       | 可理解性（understandability） |
| 可复用（reusability）                        | 可测试性（testability）         | 模块化（modularity）          |
| 高内聚低耦合（high cohesion loose coupling） | 高效（high effciency）          | 高性能（highperformance）     |
| 安全性（security）                           | 兼容性（compatibility）         | 易用性（usability）           |
| 整洁（clean）                                | 清晰（clarity）                 | 简单（simple）                |
| 直接（straightforward）                      | 少即是多（less code is more）   | 文档详尽（welldocumented）    |
| 分层清晰（well-layered）                     | 正确性（correctness、bug free） | 健壮性（robustness）          |
| 可用性（reliability）                        | 可伸缩性（scalability）         | 鲁棒性（robustness）          |
| 稳定性（stability）                          | 优雅（elegant）                 | 好（good）                    |
|                                              |                                 |                               |

### 004 如何正确的评价代码质量？
对代码的质量评价存在主观性，很难量化，而且主观评价的准确度往往跟工程师自身经验成正比的。
所以，我们可以选择几个最常用最重要的标准有的放矢的来评价代码质量比如：
可维护性、可读性、可扩展性、健壮性、简洁性、可复用性、可测试性

### 005 什么是可维护性（maintainability）？
代码易维护：在不破坏原有代码设计、不引入新的 bug 的情况下，能够快速地修改或者添加代码。
代码不易维护：就是指，修改或者添加代码需要冒着极大的引入新 bug 的风险，并且需要花费很长的时间才能完成
是否易维护就是针对维护的人来说的。不同水平的人对于同一份代码的维护能力并不是相同的。所以从正面去分析一个代码是否易维护稍微有点难度。不过，我们可以从侧面给出一个比较主观但又比较准确的感受：如果代码分层清晰、模块化好、高内聚低耦合、遵从基于接口而非实现编程的设计原则等等，那就可能意味着代码易维护。如果 bug 容易修复，修改、添加功能能够轻松完成，那我们就可以主观地认为代码对我们来说是易维护的。

### 006 什么是可读性（readability）？
代码的可读性是很重要的，毕竟，代码被阅读的次数远远超过被编写和执行的次数。可以说代码的可读性应该是评价代码质量最重要的指标之一。
那如何评价一段代码的可读性呢？
可以通过代码是否符合编码规范、命名是否达意、注释是否详尽、函数是否长短合适、模块划分是否清晰、是否符合高内聚低耦合等等。

### 007 什么是可扩展性（extensibility）？
代码的扩展性表示了我们的代码应对未来需求变化的能力，也就是我们在不修改或少量修改原有代码的情况下，通过扩展的方式添加新的功能代码。说直白点就是，代码预留了一些功能扩展点，你可以把新功能代码，直接插到扩展点上，而不需要因为要添加一个功能而大动干戈，改动大量的原始代码。

### 008 什么是简洁性（simplicity）？
思从深而行从简：用最简单的方法解决最复杂的问题
 KISS 原则：“Keep It Simple，Stupid”。这个原则说的意思就是，尽量保持代码简单。代码简单、逻辑清晰，也就意味着易读、易维护。我们在编写代码的时候，往往也会把简单、清晰放到首位。

### 009 什么是可复用性（reusability）？
代码的可复用性可以简单地理解为，尽量减少重复代码的编写，复用已有的代码。可复用性也是一个非常重要的代码评价标准，是很多设计原则、思想、模式等所要达到的最终效果。

### 010 什么是可测试性（testability）？
代码可测试性的好坏，能从侧面上非常准确地反应代码质量的好坏。代码的可测试性差，比较难写单元测试，那基本上就能说明代码设计得有问题。

### 011 如何才能写出高质量的代码？
代码质量高低是一个综合各种因素得到的结论。我们并不能通过单一的维度去评价一段代码的好坏,要写出满足这些评价标准的高质量代码，我们需要掌握一些更加细化、更加能落地的编程方法论，包括面向对象设计思想、设计原则、设计模式、编码规范、重构技巧等。而所有这些编程方法论的最终目的都是为了编写出高质量的代码。比如：
面向对象中的继承、多态能让我们写出可复用的代码；
编码规范能让我们写出可读性好的代码；
设计原则中的单一职责、DRY、基于接口而非实现、里式替换原则等，可以让我们写出可复用、可读性好、易扩展、易维护的代码；
设计模式可以让我们写出易扩展的代码；
持续重构可以时刻保持代码的可维护性等等。

![](https://tva1.sinaimg.cn/large/0081Kckwly1gkuyn8449hj31590u013c.jpg)



## 第二章 面向对象

面向对象编程因为其具有丰富的特性（封装、抽象、继承、多态），可以实现很多复杂的设计思路，是很多设计原则、设计模式等编码实现的基础。



面向对象的四大特性：封装、抽象、继承、多态
面向对象编程与面向过程编程的区别和联系
面向对象分析、面向对象设计、面向对象编程
接口和抽象类的区别以及各自的应用场景
基于接口而非实现编程的设计思想
多用组合少用继承的设计思想
面向过程的贫血模型和面向对象的充血模型





## 第三章 统一建模语言 UML


## 第四章 设计原则

设计原则是指导我们代码设计的一些经验总结，对于某些场景下，是否应该应用某种设计模式，具有指导意义。比如，“开闭原则”是很多设计模式（策略、模板等）的指导原则

SOLID 原则 -SRP 单一职责原则

SOLID 原则 -OCP 开闭原则

SOLID 原则 -LSP 里式替换原则

SOLID 原则 -ISP 接口隔离原则

SOLID 原则 -DIP 依赖倒置原则

DRY 原则

KISS 原则

YAGNI 原则

LOD 法则



## 第五章 设计模式

设计模式是针对软件开发中经常遇到的一些设计问题，总结出来的一套解决方案或者设计思路。应用设计模式的主要目的是提高代码的可扩展性。从抽象程度上来讲，设计原则比设计模式更抽象。设计模式更加具体、更加可执行



1. 创建型
  常用的有：单例模式、工厂模式（工厂方法和抽象工厂）、建造者模式。
  不常用的有：原型模式。
2. 结构型
  常用的有：代理模式、桥接模式、装饰者模式、适配器模式。
  不常用的有：门面模式、组合模式、享元模式。
3. 行为型
  常用的有：观察者模式、模板模式、策略模式、职责链模式、迭代器模式、状态模式。
  不常用的有：访问者模式、备忘录模式、命令模式、解释器模式、中介模式。





## 第六章 编程规范

编程规范主要解决的是代码的可读性问题。编码规范相对于设计原则、设计模式，更加具体、更加偏重代码细节。即便你可能对设计原则不熟悉、对设计模式不了解，但你最起码要掌握基本的编码规范，比如，如何给变量、类、函数命名，如何写代码注释，函数不宜过
长、参数不能过多等等。对于编码规范，考虑到很多书籍已经讲得很好了（比如《重构》《代码大全》《代码整洁之道》等）。



## 第七章 重构

重构作为保持代码质量不下降的有效手段，利用的就是面向对象、设计原则、设计模式、编码规范这些理论

重构的目的（why）、对象（what）、时机（when）、方法（how）；
保证重构不出错的技术手段：单元测试和代码的可测试性；
两种不同规模的重构：大重构（大规模高层次）和小重构（小规模低层次）





## 第一章 认识UML

参考：

[控制对类成员的访问 | Java™ 教程中文版](https://pingfangx.github.io/java-tutorials/java/javaOO/accesscontrol.html)

[可见性修饰符 | Kotlin 语言中文站](https://www.kotlincn.net/docs/reference/visibility-modifiers.html)

Java 可见修饰符

下表显示了可以应用于每个访问修饰符的 Alpha 类成员的可见位置。

| 修饰符    | Alpha | Beta | Alphasub | Gamma |
| --------- | ----- | ---- | -------- | ----- |
| public    | Y     | Y    | Y        | Y     |
| protected | Y     | Y    | Y        | N     |
| default   | Y     | Y    | N        | N     |
| private   | Y     | N    | N        | N     |



类的UML表示

类之间的关系

建立类图

使用类图



## 第二章 软件设计七大原则

Principle

### 2.1 开闭原则

定义：一个实体（类、模块、函数）应该对扩展开放，对修改关闭。

思想：用抽象构建框架，用实现扩展细节

优点：提高软件系统的可复用性，可维护性

抽象场景：在面向更稳定的抽象编程时，通过面向对象语言的继承和多态机制，让一个类去继承一个固定的抽象类或接口，再通过重写

改变其固有方法或者添加新的扩展方法，当变化发生时，我们就可以通过上层抽象类来隔离同类变化。

这个场景的核心在于实现-抽象化：从具体的业务场景当中抽象出抽象模型，再从抽象模型中得出我们具体的业务模型

具体场景：校验规则相关（例如：校验一个字符串的格式是否合规、校验提交请求之前的参数是否合规等）

#### 2.1.1  开闭原则的应用

### 2.2 依赖倒置原则







## 第三章 设计模式

‘

